@model DE2.Models.TinTuc

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<h2>Thêm mới tin tức</h2>

<div class="w3agile-validation w3ls-validation">
    <div class="panel panel-widget agile-validation">
        <div class="validation-grids widget-shadow" data-example-id="basic-forms">
            <div class="input-info">
                <h3>Thông tin tin tức :</h3>
            </div>
            <div class="form-body form-body-info">
                <form data-toggle="validator" novalidate="true" action="#" method="post" enctype="multipart/form-data">
                    <div class="form-group ">
                        <input type="text" class="form-control" id="TieuDe" placeholder="Tiêu đề" max="255" name="TieuDe" required="">
                    </div>
                    <div class="form-group">
                        <input type="text" min="1" class="form-control" id="MoTaNgan" max="255" placeholder="Mô tả ngắn" name="MoTaNgan" required="">

                    </div>
                    <div class="form-group">
                     
                        <textarea placeholder="Nội dung" class="form-control" rows="10" id="NoiDung" name="NoiDung"></textarea>
                    </div>
                    <div class="form-group">
                        @*<input type="file" class="form-control" id="HinhAnh" name="HinhAnh" placeholder="Hình ảnh" required="">*@
                        <img style="width: 150px;" id="preview-img" src="~/Content/images/no_img.png" alt="Alternate Text" />

                        <input id="hsp_tentaptin" class="form-control" type="file" name="HinhAnh" value="" required="" />
                        <div class="help-block with-errors"></div>
                    </div>
                    
                    <br />
                    <div class="bottom">

                        <div class="form-group">
                            <button type="submit" onclick="return checkday()" class="btn btn-primary ">Thêm</button>
                        </div>
                        <div class="clearfix"> </div>
                    </div>

                </form>
            </div>
        </div>
    </div>



</div>


<div>
    @Html.ActionLink("Back to List", "Index")
</div>

<script>
    
    function checkday() {

        var CCCD = $("#TieuDe").val();
        var Phone = $("#MoTaNgan").val();
            console.log(CCCD.length)
            if (CCCD.length > 255) {
                var text = "TieuDe phải có ít hơn 255 ký tự";
                window.location.href = "https://localhost:44361/Home/Error?MaError=" + text
                return false;
            }
            if (Phone.length > 255) {
                var text = "MoTaNgan phải có ít hơn 255 ký tự";
                window.location.href = "https://localhost:44361/Home/Error?MaError=" + text
                return false;
            }
        


        return true;
    }

    const reader = new FileReader();
    const fileInput = document.getElementById("hsp_tentaptin");
    const img = document.getElementById("preview-img");
    reader.onload = e => {
        img.src = e.target.result;
    }
    fileInput.addEventListener('change', e => {
        const f = e.target.files[0];
        reader.readAsDataURL(f);
    })
</script>




